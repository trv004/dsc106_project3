<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Spider Chart: Blood Profile Comparison</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h2>How Does My Health Compare to Patients Like Me?</h2>
  <p>An Interactive Exploration of Lab Results by Age, Gender, Height, and Weight Among Surgical Patients.</p>

  <!-- CONTROLS ROW -->
  <div class="controls">
    <div class="slider-container">
      <label for="ageSlider">Age</label>
      <input type="range" id="ageSlider" min="0" max="100" value="100" />
      <div class="slider-tooltip" id="ageSliderTooltip"></div>
    </div>
    <div class="slider-container">
      <label for="heightSlider">Height (cm)</label>
      <input type="range" id="heightSlider" min="100" max="210" value="210" />
      <div class="slider-tooltip" id="heightSliderTooltip"></div>
    </div>
    <div class="slider-container">
      <label for="weightSlider">Weight (kg)</label>
      <input type="range" id="weightSlider" min="30" max="150" value="150" />
      <div class="slider-tooltip" id="weightSliderTooltip"></div>
    </div>
    <div class="select-container">
      <label for="sexFilter">Gender:</label>
      <select id="sexFilter">
        <option value="all">All</option>
        <option value="M">Male</option>
        <option value="F">Female</option>
      </select>
    </div>
  </div>

  <!-- CHART ROW -->
  <div class="chart-container">
    <svg
      id="chart"
      width="600"
      height="600"
      viewBox="0 0 600 600"
      preserveAspectRatio="xMidYMid meet">
      <!-- D3 will draw into this -->
    </svg>
  </div>

  <div class="data-note">
  <p><strong>Note:</strong> Lab test results were normalized using reference ranges specific to each test. For each result, the normalized value was calculated as:</p>

  <pre><code>
  Normalized Value = (Result - Reference Min) / (Reference Max - Reference Min)
  </code></pre>

  <p>Values are scaled between 0 and 1, where:</p>
  <ul>
      <li><strong>0</strong> represents the lower bound of the normal reference range,</li>
      <li><strong>1</strong> represents the upper bound,</li>
      <li>Values outside the reference range are capped at 0 or 1 and do not indicate how far out of range the original value was.</li>
  </ul>

  <p>This normalization allows for comparability across different lab tests. For each user-defined group (based on age, gender, height, and weight), normalized values were averaged to produce a composite score for each test.</p>
  </div>


  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
